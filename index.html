
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="theme-color" content="#1e6b1e">
<link rel="manifest" href="manifest.json">
<title>PvZ Lite</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="ui">
  <span id="sun">â˜€ 50</span>
  <span id="wave">Wave 1</span>
  <button id="plantBtn">Peashooter (100)</button>
  <button id="wallBtn">Wallnut (50)</button>
  <button id="shovelBtn">Shovel</button>
</div>
<canvas id="game"></canvas>
<button id="installBtn" style="position:fixed;bottom:10px;left:10px;z-index:20;display:none;">Install App</button>
<script src="game.js"></script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js');
  });
}

let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('installBtn').style.display='block';
});
document.getElementById('installBtn').addEventListener('click', ()=>{
  if(deferredPrompt){
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then(choice=>{
      deferredPrompt = null;
      document.getElementById('installBtn').style.display='none';
    });
  }
});
</script>
</body>
</html>
